<root main_tree_to_execute="MainTree">
    <BehaviorTree ID="MainTree">
        <Sequence>
             <Action ID="SaySomething" message="Starting Search" />
             <Action ID="WaitForDetection" />
             <Fallback>
                 <Sequence>
                     <SubTree ID="SearchForCanWithOAKD_Fix" objectOfInterest="coke_can" />
                     <Action ID="SaySomething" message="Can Detected!" />
                 </Sequence>
                 <Action ID="SaySomething" message="Search Failed. Giving up." />
             </Fallback>
        </Sequence>
    </BehaviorTree>

    <BehaviorTree ID="SearchForCanWithOAKD_Fix">
        <Sequence>
            <Action ID="WaitForDetection" />
            <ReactiveFallback name="FindCanVisually">
                <Sequence>
                    <Action ID="WaitForNewOAKDFrame" />
                    <Condition ID="CanDetectedByOAKD" objectOfInterest="coke_can" />
                </Sequence>
                <ForceFailure>
                    <Decorator ID="ReactiveRepeatUntilSuccessOrCount" num_cycles="12">
                        <Sequence>
                            <Action ID="RotateRobot" degrees="30" />
                            <Action ID="WaitForNewOAKDFrame" />
                            <AlwaysFailure />
                        </Sequence>
                    </Decorator>
                </ForceFailure>
            </ReactiveFallback>
        </Sequence>
    </BehaviorTree>
</root>
